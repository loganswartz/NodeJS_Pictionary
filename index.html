<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>NodeJS Pictionary</title>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
	<link rel="stylesheet" href="css/main.css">
</head>

<body>
	<div id='login' class='page'>
		<div id='about-the-app'>
			<h1>Pictionary</h1>
			<h4>A NodeJS app by Aaron, Yedidiya, and Logan</h4>
		</div>
		<div id='login-box'>
			<button id="login-button"><b>Host a new game</b></button>
			<span style='margin-top: 2rem; margin-bottom: 2rem;'><b>or</b></span>
			<input id='join-game' type='text' placeholder='Enter the game ID'>
			<span id="game-not-found" style="display: none; color: red;">The requested game does not exist. Check the Game code and try again.</span>
		</div>
	</div>
	<div id='pictionary' class='page'>
		<span id="game-code"></span>
		<main>

		</main>
		<input id='guesser-input' type='text' placeholder='What are they drawing?'>
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', (event) => {
			let socket = io.connect();

			let login = document.querySelector('#login');
			let pictionary = document.querySelector('#pictionary');
			let loginButton = document.querySelector('#login-button');
			let joinGame = document.querySelector('#join-game');

			let gameNotFound = document.querySelector('#game-not-found');
			let gameCode = document.querySelector('#game-code');

			loginButton.addEventListener('click', () => {
				socket.emit('new game');
				login.style.display = 'none';
				pictionary.style.display = 'block';
			});

			joinGame.addEventListener('change', (event) => {
				socket.emit('join game', joinGame.value);
			});

			socket.on('game found', () => {
				login.style.display = 'none';
				pictionary.style.display = 'block';
				gameNotFound.style.display = 'none';
			});

			socket.on('game not found', () => {				
				gameNotFound.style.display = 'block';
			});

			socket.on('game code', (code) => {
				gameCode.innerHTML += code;
			});
		});
	</script>
</body>

</html>